<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RSS Feed Validator</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .feed-test {
            background: white;
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
            border-left: 4px solid #ddd;
        }
        .feed-test.success {
            border-left-color: #4CAF50;
        }
        .feed-test.error {
            border-left-color: #f44336;
        }
        .feed-test.loading {
            border-left-color: #2196F3;
        }
        .status {
            font-weight: bold;
            margin-bottom: 5px;
        }
        .success .status {
            color: #4CAF50;
        }
        .error .status {
            color: #f44336;
        }
        .loading .status {
            color: #2196F3;
        }
        .url {
            font-family: monospace;
            background: #f0f0f0;
            padding: 5px;
            border-radius: 4px;
            margin: 5px 0;
        }
        .details {
            font-size: 0.9em;
            color: #666;
        }
        .summary {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        button {
            background: #2196F3;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin: 10px 0;
        }
        button:hover {
            background: #1976D2;
        }
    </style>
</head>
<body>
    <h1>RSS Feed Validator</h1>
    <div class="summary">
        <h2>Testing RSS Feed URLs</h2>
        <p>This page will test all RSS feed URLs to check if they respond with 200 OK status code.</p>
        <button onclick="testAllFeeds()">Start Testing All Feeds</button>
        <div id="summary-stats"></div>
    </div>
    <div id="results"></div>

    <script>
        const feeds = [
            // AI News Sources
            {
                name: 'MIT Technology Review',
                url: 'https://www.technologyreview.com/topic/artificial-intelligence/feed',
                type: 'news'
            },
            {
                name: 'VentureBeat AI',
                url: 'https://venturebeat.com/category/ai/feed/',
                type: 'news'
            },
            {
                name: 'TechCrunch AI',
                url: 'https://techcrunch.com/category/artificial-intelligence/feed/',
                type: 'news'
            },
            {
                name: 'Wired AI',
                url: 'https://www.wired.com/tag/artificial-intelligence/feed/',
                type: 'news'
            },
            {
                name: 'The Verge AI',
                url: 'https://www.theverge.com/ai-artificial-intelligence/rss/index.xml',
                type: 'news'
            },
            {
                name: 'Ars Technica AI',
                url: 'https://feeds.arstechnica.com/arstechnica/technology-lab',
                type: 'news'
            },
            // AI Research Papers
            {
                name: 'ArXiv AI',
                url: 'https://arxiv.org/rss/cs.AI',
                type: 'papers'
            },
            {
                name: 'ArXiv Machine Learning',
                url: 'https://arxiv.org/rss/cs.LG',
                type: 'papers'
            },
            {
                name: 'ArXiv Computer Vision',
                url: 'https://arxiv.org/rss/cs.CV',
                type: 'papers'
            },
            // AI Blogs
            {
                name: 'Google AI Blog',
                url: 'https://ai.googleblog.com/feeds/posts/default',
                type: 'blogs'
            },
            {
                name: 'OpenAI Blog',
                url: 'https://openai.com/blog/rss.xml',
                type: 'blogs'
            },
            {
                name: 'DeepMind Blog',
                url: 'https://deepmind.com/blog/feed/basic/',
                type: 'blogs'
            },
            {
                name: 'Anthropic Blog',
                url: 'https://www.anthropic.com/feed.xml',
                type: 'blogs'
            },
            {
                name: 'Microsoft AI Blog',
                url: 'https://blogs.microsoft.com/ai/feed/',
                type: 'blogs'
            },
            {
                name: 'Meta AI Blog',
                url: 'https://ai.meta.com/blog/rss/',
                type: 'blogs'
            },
            {
                name: 'NVIDIA AI Blog',
                url: 'https://blogs.nvidia.com/feed/',
                type: 'blogs'
            },
            {
                name: 'Towards Data Science',
                url: 'https://towardsdatascience.com/feed',
                type: 'blogs'
            },
            {
                name: 'Distill',
                url: 'https://distill.pub/rss.xml',
                type: 'blogs'
            },
            // AI Videos (YouTube RSS feeds)
            {
                name: 'Two Minute Papers',
                url: 'https://www.youtube.com/feeds/videos.xml?channel_id=UCbfYPyITQ-7l4upoX8nvctg',
                type: 'videos'
            },
            {
                name: 'Computerphile',
                url: 'https://www.youtube.com/feeds/videos.xml?channel_id=UC9-y-6csu5WGm29I7JiwpnA',
                type: 'videos'
            },
            {
                name: '3Blue1Brown',
                url: 'https://www.youtube.com/feeds/videos.xml?channel_id=UCYO_jab_esuFRV4b17AJtAw',
                type: 'videos'
            }
        ];

        const corsProxies = [
            'https://api.allorigins.win/get?url=',
            'https://cors-anywhere.herokuapp.com/',
            'https://thingproxy.freeboard.io/fetch/',
            'https://api.codetabs.com/v1/proxy?quest='
        ];

        let testResults = {
            total: 0,
            success: 0,
            failed: 0,
            working: []
        };

        async function testFeed(feed) {
            const resultDiv = document.getElementById(`feed-${feed.name.replace(/\s+/g, '-')}`);
            resultDiv.className = 'feed-test loading';
            resultDiv.innerHTML = `
                <div class="status">Testing...</div>
                <div class="url">${feed.url}</div>
                <div class="details">Testing with multiple CORS proxies...</div>
            `;

            for (let i = 0; i < corsProxies.length; i++) {
                const proxy = corsProxies[i];
                try {
                    console.log(`Testing ${feed.name} with proxy ${i + 1}`);
                    
                    const timeoutPromise = new Promise((_, reject) => {
                        setTimeout(() => reject(new Error('Timeout')), 8000);
                    });
                    
                    const fetchPromise = fetch(proxy + encodeURIComponent(feed.url), {
                        method: 'GET',
                        headers: {
                            'Accept': 'application/json, text/plain, */*',
                            'User-Agent': 'Mozilla/5.0 (compatible; RSS-Test/1.0)'
                        }
                    });
                    
                    const response = await Promise.race([fetchPromise, timeoutPromise]);
                    
                    if (response.ok) {
                        const data = await response.json();
                        if (data.contents) {
                            // Test if it's valid XML
                            const parser = new DOMParser();
                            const xmlDoc = parser.parseFromString(data.contents, 'text/xml');
                            const parseError = xmlDoc.querySelector('parsererror');
                            
                            if (!parseError) {
                                const items = xmlDoc.querySelectorAll('item');
                                resultDiv.className = 'feed-test success';
                                resultDiv.innerHTML = `
                                    <div class="status">✅ SUCCESS</div>
                                    <div class="url">${feed.url}</div>
                                    <div class="details">
                                        Proxy: ${proxy}<br>
                                        Status: ${response.status}<br>
                                        Items found: ${items.length}<br>
                                        Type: ${feed.type}
                                    </div>
                                `;
                                testResults.success++;
                                testResults.working.push({
                                    ...feed,
                                    proxy: proxy,
                                    itemCount: items.length
                                });
                                return true;
                            }
                        }
                    }
                } catch (error) {
                    console.log(`Proxy ${i + 1} failed for ${feed.name}:`, error.message);
                    if (i === corsProxies.length - 1) {
                        resultDiv.className = 'feed-test error';
                        resultDiv.innerHTML = `
                            <div class="status">❌ FAILED</div>
                            <div class="url">${feed.url}</div>
                            <div class="details">
                                Error: ${error.message}<br>
                                All proxies failed
                            </div>
                        `;
                        testResults.failed++;
                    }
                }
            }
            return false;
        }

        async function testAllFeeds() {
            testResults = {
                total: feeds.length,
                success: 0,
                failed: 0,
                working: []
            };

            const resultsDiv = document.getElementById('results');
            resultsDiv.innerHTML = '';

            // Create result divs
            feeds.forEach(feed => {
                const div = document.createElement('div');
                div.id = `feed-${feed.name.replace(/\s+/g, '-')}`;
                div.className = 'feed-test';
                resultsDiv.appendChild(div);
            });

            // Test feeds sequentially
            for (const feed of feeds) {
                await testFeed(feed);
                updateSummary();
                await new Promise(resolve => setTimeout(resolve, 500)); // Small delay between tests
            }

            console.log('Working feeds:', testResults.working);
        }

        function updateSummary() {
            const summaryDiv = document.getElementById('summary-stats');
            summaryDiv.innerHTML = `
                <h3>Test Results:</h3>
                <p>Total: ${testResults.total} | Success: ${testResults.success} | Failed: ${testResults.failed}</p>
                <p>Success Rate: ${((testResults.success / testResults.total) * 100).toFixed(1)}%</p>
            `;
        }

        // Auto-start testing when page loads
        window.addEventListener('load', () => {
            setTimeout(testAllFeeds, 1000);
        });
    </script>
</body>
</html> 